<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Rock Paper Scissors</title>
</head>
<body>
    <div class="instructions">Play rock, paper, scissors against the computer by pressing the buttons below! Reach 5 wins first to win the game.</div>
    <div class="scoreContainer">
        <div id="score"></div> 
    </div>
    <div class="rps">
        <button id="rock" class="main-btn">Rock</button>
        <button id="paper" class="main-btn">Paper</button>
        <button id="scissors" class="main-btn">Scissors</button>
    </div>
    <div class="message">
        <div id="result"></div>
        <div id="winner"></div>
    </div>
    
    <script>

        function computerPlay() {
            const number = Math.floor(Math.random() * 3);
            if (number === 0) {
                return "rock";
            } else if (number === 1) {
                return "paper";
            } else {
                return "scissors";
            }
        }

        function playRound(playerSelection, computerSelection) {       
            
            if (playerSelection === "rock") {
                if (computerSelection === "rock") {
                    result.textContent = 'Draw!';
                    draws++;
                } else if (computerSelection === "paper") {
                    losses++;
                    result.textContent = 'You lose! Paper beats rock';
                } else {
                    wins++;
                    result.textContent = 'You win! Rock beats scissors';
                }
            } else if (playerSelection === "paper") {
                if (computerSelection === "paper") {
                    result.textContent = 'Draw!';
                    draws++;
                } else if (computerSelection === "scissors") {
                    losses++;
                    result.textContent = 'You lose! Scissors beats paper';
                } else {
                    wins++;
                    result.textContent = 'You win! Paper beats rock';
                }
            } else {
                if (computerSelection === "scissors") {
                    result.textContent = 'Draw!';
                    draws++;
                } else if (computerSelection === "rock") {
                    losses++;
                    result.textContent = 'You lose! Rock beats scissors';
                } else {
                    wins++;
                    result.textContent = 'You win! Scissors beats paper';
                }
            }            
        }

        function game() {

            const buttons = document.querySelectorAll('.main-btn');
            const score = document.querySelector('#score');
            const winner = document.querySelector('#winner');
          
            buttons.forEach((button) => {
                button.addEventListener('click', () => {       
                    playRound(button.id, computerPlay()); 
                    score.textContent = wins + ' wins, ' + draws + ' draws and ' + losses + ' losses';
                    winner.textContent = '';
                    if (wins >= 5 || losses >=5) {
                        result.textContent = '';
                        if (wins > losses) {
                            winner.textContent = 'You won the game! :D';
                            wins = 0;
                            draws = 0;
                            losses = 0;
                            score.textContent = '';
                        } else {
                            winner.textContent = 'You lost the game :(';
                            wins = 0;
                            draws = 0;
                            losses = 0;
                            score.textContent = ''; 
                            }
                        }                     
                })
            })
        }

        const result = document.querySelector('#result');
        let wins = 0;
        let draws = 0;
        let losses = 0;       
        game();

    </script>
</body>
</html>